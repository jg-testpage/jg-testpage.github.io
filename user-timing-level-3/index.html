<!doctype html><html><head><title>User Timing level 3 tests</title></head>
  <body>
    <h1>User Timing level 3: <code>performance.mark('myMark', {startTime: 1234})</code></h1>
    <h2>Browser support</h2>
    <ul>
      <li><a href="https://www.chromestatus.com/feature/5149401886490624">Chrome 78 (2019.10)</a>
      <li><a href="https://webkit.org/blog/11333/release-notes-for-safari-technology-preview-115/">Safari TP115 (coming in 14.1 stable: ~2021.04)</a>
      <li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581705">Firefox bug</a>
    </ul>
    <h2>Resources</h2>
    <ul>
      <li>https://w3c.github.io/user-timing/
      <li>https://speedcurve.com/blog/user-timing-level-3-set-a-value/
    </ul>
    <p>Check console and performance panel in devtools.</p>
    <script>

      setTimeout(() => {
        performance.mark('a', {startTime: 300})
        performance.mark('b', {startTime: 350})
        performance.measure('a->b', 'a', 'b') 
        
        performance.mark('c', {startTime: 3000})
        performance.mark('d', {startTime: 3500})
        performance.measure('c->d', 'c', 'd')
        
        if (performance.getEntriesByType('measure')[0].duration === 50) {
          alert('it works')
        } else {
          alert('looks like the browser does not support L3 yet')
        }
        console.table(performance.getEntriesByType('measure'))
      }, 1000)

    </script>
  </body>
</html>
